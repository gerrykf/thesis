# 健康管理系统测试数据脚本

## 1. 用户表测试数据 (users)

```sql
-- 插入3条用户测试数据
INSERT INTO users (
    username, password, nickname, phone, email, gender, birth_date,
    height, target_weight, role, is_active
) VALUES
-- 用户1: 管理员
('admin', '$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/Ln8xqjEJ8KjDAKRBK',
 '系统管理员', '13800000001', 'admin@health.com', 'male', '1990-01-15',
 175.00, 70.00, 'admin', TRUE),

-- 用户2: 普通用户（女性）
('zhang_mei', '$2b$12$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi',
 '张美丽', '13800000002', 'zhangmei@example.com', 'female', '1995-06-20',
 165.00, 55.00, 'user', TRUE),

-- 用户3: 普通用户（男性）
('li_qiang', '$2b$12$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi',
 '李强', '13800000003', 'liqiang@example.com', 'male', '1988-12-08',
 180.00, 75.00, 'user', TRUE);
```

## 2. 食物分类表测试数据 (food_categories)

```sql
-- 插入3条食物分类测试数据
INSERT INTO food_categories (
    name, name_en, parent_id, level, sort_order, icon, color, description
) VALUES
-- 分类1: 主食
('主食', 'Staple Food', NULL, 1, 1, 'rice', '#FFA726',
 '提供碳水化合物和能量的主要食物'),

-- 分类2: 蔬菜
('蔬菜', 'Vegetables', NULL, 1, 2, 'vegetable', '#66BB6A',
 '富含维生素和矿物质的蔬菜类食物'),

-- 分类3: 水果
('水果', 'Fruits', NULL, 1, 3, 'fruit', '#EF5350',
 '含有丰富维生素C和纤维的水果类食物');
```

## 3. 食物表测试数据 (foods)

```sql
-- 插入3条食物测试数据
INSERT INTO foods (
    name, name_en, category, brand, calories_per_100g, protein_per_100g,
    fat_per_100g, carbs_per_100g, fiber_per_100g, sodium_per_100g,
    sugar_per_100g, description, serving_size, is_active, is_verified
) VALUES
-- 食物1: 米饭
('白米饭', 'White Rice', '主食', NULL, 116.00, 2.60, 0.30, 25.90, 0.30,
 5.00, 0.12, '最常见的主食，提供丰富的碳水化合物', 150.00, TRUE, TRUE),

-- 食物2: 苹果
('红富士苹果', 'Red Fuji Apple', '水果', NULL, 52.00, 0.26, 0.17, 13.81, 2.40,
 1.00, 10.39, '甜脆可口的苹果，富含维生素C和纤维', 200.00, TRUE, TRUE),

-- 食物3: 鸡胸肉
('鸡胸肉', 'Chicken Breast', '肉类', NULL, 165.00, 31.02, 3.57, 0.00, 0.00,
 74.00, 0.00, '高蛋白低脂肪的优质肉类', 100.00, TRUE, TRUE);
```

## 4. 健康记录表测试数据 (health_records)

```sql
-- 插入3条健康记录测试数据
INSERT INTO health_records (
    user_id, record_date, weight, exercise_duration, exercise_type,
    exercise_calories, sleep_hours, sleep_quality, mood, heart_rate, notes
) VALUES
-- 记录1: 张美丽的健康记录
(2, '2024-01-15', 57.50, 45, '慢跑', 300.00, 7.50, 'good', 'good',
 72, '今天跑步感觉不错，体重有所下降'),

-- 记录2: 李强的健康记录
(3, '2024-01-15', 78.20, 60, '游泳', 450.00, 8.00, 'excellent', 'excellent',
 68, '游泳一小时，感觉很棒'),

-- 记录3: 张美丽前一天的记录
(2, '2024-01-14', 58.00, 30, '瑜伽', 150.00, 7.00, 'fair', 'good',
 70, '练习瑜伽放松身心');
```

## 5. 饮食记录表测试数据 (diet_records)

```sql
-- 插入3条饮食记录测试数据
INSERT INTO diet_records (
    user_id, food_id, record_date, meal_type, meal_time, quantity,
    calories, protein, fat, carbs, fiber, sodium, notes
) VALUES
-- 记录1: 张美丽的早餐 - 苹果
(2, 2, '2024-01-15', 'breakfast', '08:00:00', 150.00,
 78.00, 0.39, 0.26, 20.72, 3.60, 1.50, '早餐水果'),

-- 记录2: 李强的午餐 - 米饭
(3, 1, '2024-01-15', 'lunch', '12:30:00', 200.00,
 232.00, 5.20, 0.60, 51.80, 0.60, 10.00, '午餐主食'),

-- 记录3: 张美丽的晚餐 - 鸡胸肉
(2, 3, '2024-01-15', 'dinner', '18:30:00', 120.00,
 198.00, 37.22, 4.28, 0.00, 0.00, 88.80, '晚餐蛋白质');
```

## 6. 用户目标表测试数据 (user_goals)

```sql
-- 插入3条用户目标测试数据
INSERT INTO user_goals (
    user_id, goal_type, goal_name, target_value, current_value, unit,
    start_date, target_date, status, description
) VALUES
-- 目标1: 张美丽的减重目标
(2, 'weight', '减重目标', 55.00, 57.50, 'kg',
 '2024-01-01', '2024-03-01', 'active', '希望在3个月内减重到55公斤'),

-- 目标2: 李强的运动目标
(3, 'exercise', '每周运动目标', 300.00, 120.00, '分钟',
 '2024-01-01', '2024-12-31', 'active', '每周运动300分钟，保持健康'),

-- 目标3: 张美丽的热量控制目标
(2, 'calories', '每日热量控制', 1500.00, 1650.00, 'kcal',
 '2024-01-01', '2024-06-01', 'active', '控制每日热量摄入在1500卡以内');
```

## 7. 系统日志表测试数据 (system_logs)

```sql
-- 插入3条系统日志测试数据
INSERT INTO system_logs (
    user_id, action, resource, resource_id, method, url, ip_address,
    user_agent, response_status, response_time
) VALUES
-- 日志1: 用户登录
(2, 'user_login', 'auth', 2, 'POST', '/api/auth/login', '192.168.1.100',
 'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)', 200, 150),

-- 日志2: 创建健康记录
(2, 'create_health_record', 'health_records', 1, 'POST', '/api/health', '192.168.1.100',
 'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)', 201, 200),

-- 日志3: 查询食物列表
(3, 'get_foods', 'foods', NULL, 'GET', '/api/foods?category=主食', '192.168.1.101',
 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36', 200, 80);
```

## 8. 完整批量插入脚本

```sql
-- ================================
-- 健康管理系统测试数据完整脚本
-- ================================

-- 使用数据库
USE health_management;

-- 清空现有测试数据（可选）
-- DELETE FROM system_logs;
-- DELETE FROM user_goals;
-- DELETE FROM diet_records;
-- DELETE FROM health_records;
-- DELETE FROM foods;
-- DELETE FROM food_categories;
-- DELETE FROM users WHERE username IN ('admin', 'zhang_mei', 'li_qiang');

-- 1. 插入用户数据
INSERT INTO users (
    username, password, nickname, phone, email, gender, birth_date,
    height, target_weight, role, is_active, last_login_at
) VALUES
('admin', '$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/Ln8xqjEJ8KjDAKRBK',
 '系统管理员', '13800000001', 'admin@health.com', 'male', '1990-01-15',
 175.00, 70.00, 'admin', TRUE, '2024-01-15 09:00:00'),

('zhang_mei', '$2b$12$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi',
 '张美丽', '13800000002', 'zhangmei@example.com', 'female', '1995-06-20',
 165.00, 55.00, 'user', TRUE, '2024-01-15 08:30:00'),

('li_qiang', '$2b$12$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi',
 '李强', '13800000003', 'liqiang@example.com', 'male', '1988-12-08',
 180.00, 75.00, 'user', TRUE, '2024-01-15 07:45:00');

-- 2. 插入食物分类数据
INSERT INTO food_categories (
    name, name_en, parent_id, level, sort_order, icon, color, description, is_active
) VALUES
('主食', 'Staple Food', NULL, 1, 1, 'rice', '#FFA726',
 '提供碳水化合物和能量的主要食物', TRUE),

('蔬菜', 'Vegetables', NULL, 1, 2, 'vegetable', '#66BB6A',
 '富含维生素和矿物质的蔬菜类食物', TRUE),

('水果', 'Fruits', NULL, 1, 3, 'fruit', '#EF5350',
 '含有丰富维生素C和纤维的水果类食物', TRUE);

-- 3. 插入食物数据
INSERT INTO foods (
    name, name_en, category, brand, calories_per_100g, protein_per_100g,
    fat_per_100g, carbs_per_100g, fiber_per_100g, sodium_per_100g,
    sugar_per_100g, description, serving_size, is_active, is_verified, created_by
) VALUES
('白米饭', 'White Rice', '主食', NULL, 116.00, 2.60, 0.30, 25.90, 0.30,
 5.00, 0.12, '最常见的主食，提供丰富的碳水化合物', 150.00, TRUE, TRUE, 1),

('红富士苹果', 'Red Fuji Apple', '水果', NULL, 52.00, 0.26, 0.17, 13.81, 2.40,
 1.00, 10.39, '甜脆可口的苹果，富含维生素C和纤维', 200.00, TRUE, TRUE, 1),

('鸡胸肉', 'Chicken Breast', '肉类', NULL, 165.00, 31.02, 3.57, 0.00, 0.00,
 74.00, 0.00, '高蛋白低脂肪的优质肉类', 100.00, TRUE, TRUE, 1);

-- 4. 插入健康记录数据
INSERT INTO health_records (
    user_id, record_date, weight, exercise_duration, exercise_type,
    exercise_calories, sleep_hours, sleep_quality, mood, heart_rate,
    body_temperature, notes
) VALUES
(2, '2024-01-15', 57.50, 45, '慢跑', 300.00, 7.50, 'good', 'good',
 72, 36.50, '今天跑步感觉不错，体重有所下降'),

(3, '2024-01-15', 78.20, 60, '游泳', 450.00, 8.00, 'excellent', 'excellent',
 68, 36.20, '游泳一小时，感觉很棒'),

(2, '2024-01-14', 58.00, 30, '瑜伽', 150.00, 7.00, 'fair', 'good',
 70, 36.30, '练习瑜伽放松身心');

-- 5. 插入饮食记录数据
INSERT INTO diet_records (
    user_id, food_id, record_date, meal_type, meal_time, quantity,
    calories, protein, fat, carbs, fiber, sodium, notes
) VALUES
(2, 2, '2024-01-15', 'breakfast', '08:00:00', 150.00,
 78.00, 0.39, 0.26, 20.72, 3.60, 1.50, '早餐水果'),

(3, 1, '2024-01-15', 'lunch', '12:30:00', 200.00,
 232.00, 5.20, 0.60, 51.80, 0.60, 10.00, '午餐主食'),

(2, 3, '2024-01-15', 'dinner', '18:30:00', 120.00,
 198.00, 37.22, 4.28, 0.00, 0.00, 88.80, '晚餐蛋白质');

-- 6. 插入用户目标数据
INSERT INTO user_goals (
    user_id, goal_type, goal_name, target_value, current_value, unit,
    start_date, target_date, status, description
) VALUES
(2, 'weight', '减重目标', 55.00, 57.50, 'kg',
 '2024-01-01', '2024-03-01', 'active', '希望在3个月内减重到55公斤'),

(3, 'exercise', '每周运动目标', 300.00, 120.00, '分钟',
 '2024-01-01', '2024-12-31', 'active', '每周运动300分钟，保持健康'),

(2, 'calories', '每日热量控制', 1500.00, 1650.00, 'kcal',
 '2024-01-01', '2024-06-01', 'active', '控制每日热量摄入在1500卡以内');

-- 7. 插入系统日志数据
INSERT INTO system_logs (
    user_id, action, resource, resource_id, method, url, ip_address,
    user_agent, response_status, response_time, created_at
) VALUES
(2, 'user_login', 'auth', 2, 'POST', '/api/auth/login', '192.168.1.100',
 'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)', 200, 150, '2024-01-15 08:30:00'),

(2, 'create_health_record', 'health_records', 1, 'POST', '/api/health', '192.168.1.100',
 'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)', 201, 200, '2024-01-15 08:35:00'),

(3, 'get_foods', 'foods', NULL, 'GET', '/api/foods?category=主食', '192.168.1.101',
 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36', 200, 80, '2024-01-15 12:25:00');

-- 8. 验证数据插入
SELECT '用户表数据验证' as table_name, COUNT(*) as record_count FROM users WHERE username IN ('admin', 'zhang_mei', 'li_qiang')
UNION ALL
SELECT '食物分类表数据验证', COUNT(*) FROM food_categories WHERE name IN ('主食', '蔬菜', '水果')
UNION ALL
SELECT '食物表数据验证', COUNT(*) FROM foods WHERE name IN ('白米饭', '红富士苹果', '鸡胸肉')
UNION ALL
SELECT '健康记录表数据验证', COUNT(*) FROM health_records WHERE user_id IN (2, 3)
UNION ALL
SELECT '饮食记录表数据验证', COUNT(*) FROM diet_records WHERE user_id IN (2, 3)
UNION ALL
SELECT '用户目标表数据验证', COUNT(*) FROM user_goals WHERE user_id IN (2, 3)
UNION ALL
SELECT '系统日志表数据验证', COUNT(*) FROM system_logs WHERE user_id IN (2, 3);

-- 显示插入的测试数据概览
SELECT
    u.username,
    u.nickname,
    COUNT(DISTINCT hr.id) as health_records,
    COUNT(DISTINCT dr.id) as diet_records,
    COUNT(DISTINCT ug.id) as user_goals
FROM users u
LEFT JOIN health_records hr ON u.id = hr.user_id
LEFT JOIN diet_records dr ON u.id = dr.user_id
LEFT JOIN user_goals ug ON u.id = ug.user_id
WHERE u.username IN ('admin', 'zhang_mei', 'li_qiang')
GROUP BY u.id, u.username, u.nickname
ORDER BY u.id;
```

## 9. 数据清理脚本

```sql
-- 清理测试数据脚本（谨慎使用）
-- ================================

-- 清理系统日志
DELETE FROM system_logs WHERE user_id IN (
    SELECT id FROM users WHERE username IN ('admin', 'zhang_mei', 'li_qiang')
);

-- 清理用户目标
DELETE FROM user_goals WHERE user_id IN (
    SELECT id FROM users WHERE username IN ('admin', 'zhang_mei', 'li_qiang')
);

-- 清理饮食记录
DELETE FROM diet_records WHERE user_id IN (
    SELECT id FROM users WHERE username IN ('admin', 'zhang_mei', 'li_qiang')
);

-- 清理健康记录
DELETE FROM health_records WHERE user_id IN (
    SELECT id FROM users WHERE username IN ('admin', 'zhang_mei', 'li_qiang')
);

-- 清理食物数据
DELETE FROM foods WHERE name IN ('白米饭', '红富士苹果', '鸡胸肉');

-- 清理食物分类
DELETE FROM food_categories WHERE name IN ('主食', '蔬菜', '水果');

-- 清理测试用户
DELETE FROM users WHERE username IN ('admin', 'zhang_mei', 'li_qiang');

-- 重置自增ID（可选）
-- ALTER TABLE users AUTO_INCREMENT = 1;
-- ALTER TABLE food_categories AUTO_INCREMENT = 1;
-- ALTER TABLE foods AUTO_INCREMENT = 1;
-- ALTER TABLE health_records AUTO_INCREMENT = 1;
-- ALTER TABLE diet_records AUTO_INCREMENT = 1;
-- ALTER TABLE user_goals AUTO_INCREMENT = 1;
-- ALTER TABLE system_logs AUTO_INCREMENT = 1;
```

这份测试数据脚本为每个表都提供了3条有意义的测试数据，数据之间具有逻辑关联性，可以用于系统功能测试和演示。